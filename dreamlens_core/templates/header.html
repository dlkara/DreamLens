{% load static %}
<link rel="stylesheet" href="{% static 'css/header.css' %}?v=3">

<!-- ìƒë‹¨ë°” ì „ì²´ -->
<div class="header-bar">
    <!-- í–„ë²„ê±° ë²„íŠ¼ -->
    <button id="hamburgerBtn" class="hamburger">â˜°</button>

    <!-- ë¡œê³  -->
    <a href="{% url 'index' %}" class="logo-bar">DreamLens</a>
</div>

<!-- ì‚¬ì´ë“œ íŒ¨ë„ -->
<div class="side-panel" id="sidePanel">
    <div style="text-align:right;">
        <button id="closePanelBtn">âŒ</button>
    </div>

    {% if user.is_authenticated %}
        <p>ì•ˆë…•í•˜ì„¸ìš”!</p>
        <h3>{{ user.nickname|default:user.username }} ë‹˜</h3>
        <a href="{% url 'mypage' %}" class="btn">ë‚´ ì •ë³´ ìˆ˜ì •</a>
        <a href="{% url 'logout' %}" class="btn">ë¡œê·¸ì•„ì›ƒ</a>
    {% else %}
        <p>ë§Œë‚˜ì„œ ë°˜ê°‘ìŠµë‹ˆë‹¤!</p>
        <a href="{% url 'login' %}" class="btn">ë¡œê·¸ì¸</a>
        <a href="{% url 'register_user' %}" class="btn">íšŒì›ê°€ì…</a>
    {% endif %}

    <hr>

    <!-- ë©”ë‰´ í•­ëª© -->
    <a href="{% url 'dream_interpreter' %}" class="menu">ğŸ”® í•´ëª½í•˜ê¸°</a>
    <a href="{% url 'dream_dict' %}" class="menu">ğŸ“– ê¿ˆ ì‚¬ì „</a>
    <a href="{% url 'dream_combiner' %}" class="menu">ğŸ§© ê¿ˆ ì¡°í•©ê¸°</a>
    <a href="javascript:void(0)" class="menu" onclick="goToProtectedPage('{% url 'diary_list_base' %}')">ğŸ“˜ ë‚´ ì¼ê¸°ì¥</a>
    <a href="javascript:void(0)" class="menu" onclick="goToProtectedPage('{% url 'report' %}')">ğŸ“Š ë¶„ì„ ë¦¬í¬íŠ¸</a>
</div>

<!-- í–„ë²„ê±° ë™ì‘ ë° ë³´í˜¸ëœ í˜ì´ì§€ ì œì–´ -->
<script src="{% static 'js/header.js' %}"></script>
<script>
    function goToProtectedPage(targetUrl) {
        const isLoggedIn = "{{ user.is_authenticated|yesno:'true,false' }}" === "true";
        if (isLoggedIn) {
            window.location.href = targetUrl;
        } else {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.");
            window.location.href = "{% url 'login' %}";
        }
    }
</script>
