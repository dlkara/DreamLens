{% load static %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê¿ˆ ì¼ê¸°ì¥</title>
    <link rel="stylesheet" href="{% static 'css/common.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/diary-list.css' %}">
    <script src="{% static 'js/diary-list.js' %}" defer></script>

    <!-- ë‚ ì§œë³„ ì—”íŠ¸ë¦¬ JSON ì‚½ì… -->
    <script id="entriesByDayData" type="application/json">
        {{ entries_by_day_json|safe }}
    </script>

    <!-- PK ê¸°ë°˜ ìƒì„¸ ë§í¬ í…œí”Œë¦¿ (pk=0 ìë¦¬ë§Œ ë‚˜ì¤‘ì— replace) -->
    <script>
        window.diaryDetailUrlTemplate = "{% url 'diary_detail' pk=0 %}";
    </script>
</head>
<body>
    {% include 'header.html' %}

    <main class="diary-main">
        <section class="calendar-nav">
            <a href="{% url 'diary_list' prev_yyyymm %}">â—€</a>
            <span>{{ year }}ë…„ {{ month }}ì›”</span>
            <a href="{% url 'diary_list' next_yyyymm %}">â–¶</a>
        </section>

        <div class="calendar-wrapper">
            <table class="calendar">
                <thead>
                    <tr>
                        <th>ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th>í† </th>
                    </tr>
                </thead>
                <tbody>
                    {% for week in month_days %}
                    <tr>
                        {% for cell in week %}
                        {% if cell.day %}
                        <td class="{% if cell.day == today_day %} today {% endif %}
                                   {% if cell.is_good %} good
                                   {% elif cell.is_bad %} bad
                                   {% elif cell.is_normal %} normal
                                   {% endif %}" data-day="{{ cell.day }}">
                            <span>{{ cell.day }}</span>
                        </td>
                        {% else %}
                        <td class="empty"></td>
                        {% endif %}
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="btn-group">
            <a class="btn" href="{% url 'dream_interpreter' %}">í•´ëª½í•˜ëŸ¬ ê°€ê¸°</a>
            <a class="btn" href="{% url 'report' %}">ë‚´ ì¼ê¸°ì¥ ë¶„ì„í•˜ê¸°</a>
        </div>
    </main>
    <!-- ğŸ“Œ ì¼ê¸° íŒì—… ëª¨ë‹¬ -->
    <div id="diary-popup" class="diary-popup hidden">
        <div class="popup-content">
            <button class="popup-close" aria-label="ë‹«ê¸°">&times;</button>
            <h2 class="popup-title">ğŸ“ <span id="popup-date"></span>ì˜ ì¼ê¸°</h2>
            <p class="popup-body" id="popup-text">ì—¬ê¸°ì— ì¼ê¸° ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
        </div>
    </div>
    {% include 'footer.html' %}
</body>

</html>
