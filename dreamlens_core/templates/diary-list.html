{% load static %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>꿈 일기장</title>
    <link rel="stylesheet" href="{% static 'css/common.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/diary-list.css' %}">
    <script src="{% static 'js/diary-list.js' %}" defer></script>

    <!-- 날짜별 엔트리 JSON 삽입 -->
    <script id="entriesByDayData" type="application/json">
        {{ entries_by_day_json|safe }}
    </script>

    <!-- PK 기반 상세 링크 템플릿 (pk=0 자리만 나중에 replace) -->
    <script>
        window.diaryDetailUrlTemplate = "{% url 'diary_detail' pk=0 %}";
    </script>
</head>
<body>
    {% include 'header.html' %}

    <section class="calendar-nav">
        <a href="{% url 'diary_list' prev_yyyymm %}">◀</a>
        <span>{{ year }}년 {{ month }}월</span>
        <a href="{% url 'diary_list' next_yyyymm %}">▶</a>
    </section>

    <table class="calendar">
        <thead>
        <tr>
            <th>일</th>
            <th>월</th>
            <th>화</th>
            <th>수</th>
            <th>목</th>
            <th>금</th>
            <th>토</th>
        </tr>
        </thead>
        <tbody>
        {% for week in month_days %}
        <tr>
            {% for cell in week %}
            {% if cell.day %}
            <td class="{% if cell.day == today_day %} today {% endif %}
                       {% if cell.is_good %} good
                       {% elif cell.is_bad %} bad
                       {% elif cell.is_normal %} normal
                       {% endif %}"
                data-day="{{ cell.day }}">
                <span>{{ cell.day }}</span>
            </td>
            {% else %}
            <td class="empty"></td>
            {% endif %}
            {% endfor %}
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <a class="btn" href="{% url 'dream_interpreter' %}">해몽하러 가기</a>
    <a class="btn" href="{% url 'report' %}">내 일기장 분석하기</a>

    {% include 'footer.html' %}

    <script src="{% static 'js/header.js' %}"></script>
</body>
</html>
